<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ITå²—ä½æ±‚èŒè®°å½•ç³»ç»Ÿ - è‡§åšæ¶›</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2980b9;
            --success-color: #2ecc71;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --gray-color: #95a5a6;
            --border-radius: 6px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f7fa;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 25px;
            margin-bottom: 30px;
        }

        h1, h2, h3 {
            color: var(--dark-color);
            font-weight: 700;
            margin-bottom: 20px;
        }

        h1 {
            font-size: 2.2rem;
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--primary-color);
            margin-bottom: 30px;
            position: relative;
        }

        h1::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background-color: var(--success-color);
        }

        h2 {
            font-size: 1.6rem;
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .developer-info {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8eb 100%);
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            text-align: center;
            font-weight: 500;
            color: var(--dark-color);
            box-shadow: var(--box-shadow);
            border-left: 4px solid var(--primary-color);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark-color);
        }

        input, textarea, select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-family: inherit;
            font-size: 16px;
            transition: var(--transition);
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        textarea {
            min-height: 120px;
            resize: vertical;
        }

        .btn {
            display: inline-block;
            padding: 12px 24px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            text-align: center;
            transition: var(--transition);
            text-decoration: none;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }

        .btn-success {
            background-color: var(--success-color);
            color: white;
        }

        .btn-success:hover {
            background-color: #27ae60;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }

        .btn-danger:hover {
            background-color: #c0392b;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }

        .btn-warning {
            background-color: var(--warning-color);
            color: white;
        }

        .btn-warning:hover {
            background-color: #d35400;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 14px;
        }

        .search-section {
            background-color: #f8fafc;
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            border-left: 4px solid var(--success-color);
        }

        .job-list {
            margin-top: 30px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 15px;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th {
            background-color: var(--primary-color);
            color: white;
            font-weight: 500;
            position: sticky;
            top: 0;
        }

        tr:hover {
            background-color: #f8fafc;
        }

        .action-btns {
            display: flex;
            gap: 8px;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            overflow: auto;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
        }

        .modal-content {
            background-color: white;
            margin: auto;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 600px;
            position: relative;
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
            color: var(--gray-color);
            cursor: pointer;
            transition: var(--transition);
        }

        .close:hover {
            color: var(--danger-color);
        }

        .empty-state {
            text-align: center;
            padding: 40px 0;
            color: var(--gray-color);
        }

        .empty-state i {
            font-size: 50px;
            margin-bottom: 20px;
            color: #ddd;
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 20px;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            text-transform: capitalize;
        }

        .badge-primary {
            background-color: #e3f2fd;
            color: var(--primary-color);
        }

        .badge-success {
            background-color: #e8f5e9;
            color: var(--success-color);
        }

        .badge-warning {
            background-color: #fff8e1;
            color: var(--warning-color);
        }

        .badge-danger {
            background-color: #ffebee;
            color: var(--danger-color);
        }

        .header-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 15px;
            }

            table {
                display: block;
                overflow-x: auto;
            }

            .action-btns {
                flex-direction: column;
                gap: 5px;
            }

            .btn-sm {
                width: 100%;
            }

            .header-actions {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <h1>ITå²—ä½æ±‚èŒè®°å½•ç³»ç»Ÿ</h1>

    <div class="card developer-info">
        å¼€å‘è€…: è‡§åšæ¶› | å­¦å·: 20233950 | ç­çº§: ä¿¡2305-3
        <button id="importDemoData" class="btn btn-warning" style="margin-left: 15px;"></button>
    </div>

    <div class="card search-section">
        <div class="header-actions">
            <h2 style="margin: 0;">å²—ä½åˆ—è¡¨</h2>
            <button class="btn btn-primary" onclick="document.getElementById('addJobModal').classList.add('show')">
                <i>â•</i> æ·»åŠ æ–°å²—ä½
            </button>
        </div>

        <div class="form-group">
            <label for="searchKeyword">å…³é”®è¯æœç´¢</label>
            <input type="text" id="searchKeyword" placeholder="è¾“å…¥ä¼ä¸šåç§°æˆ–å²—ä½åç§°">
        </div>

        <div class="form-row" style="display: flex; gap: 15px; margin-bottom: 15px;">
            <div class="form-group" style="flex: 1;">
                <label for="searchType">å²—ä½ç±»å‹</label>
                <select id="searchType">
                    <option value="">å…¨éƒ¨ç±»å‹</option>
                    <option value="å‰ç«¯å¼€å‘">å‰ç«¯å¼€å‘</option>
                    <option value="åç«¯å¼€å‘">åç«¯å¼€å‘</option>
                    <option value="å…¨æ ˆå¼€å‘">å…¨æ ˆå¼€å‘</option>
                    <option value="æ•°æ®åˆ†æ">æ•°æ®åˆ†æ</option>
                    <option value="äººå·¥æ™ºèƒ½">äººå·¥æ™ºèƒ½</option>
                    <option value="æµ‹è¯•å·¥ç¨‹å¸ˆ">æµ‹è¯•å·¥ç¨‹å¸ˆ</option>
                    <option value="è¿ç»´å·¥ç¨‹å¸ˆ">è¿ç»´å·¥ç¨‹å¸ˆ</option>
                    <option value="äº§å“ç»ç†">äº§å“ç»ç†</option>
                    <option value="å…¶ä»–">å…¶ä»–</option>
                </select>
            </div>

            <div class="form-group" style="flex: 1;">
                <label for="searchSalary">è–ªèµ„èŒƒå›´</label>
                <select id="searchSalary">
                    <option value="">å…¨éƒ¨</option>
                    <option value="5kä»¥ä¸‹">5kä»¥ä¸‹</option>
                    <option value="5k-10k">5k-10k</option>
                    <option value="10k-15k">10k-15k</option>
                    <option value="15k-20k">15k-20k</option>
                    <option value="20kä»¥ä¸Š">20kä»¥ä¸Š</option>
                </select>
            </div>
        </div>

        <div class="form-actions">
            <button id="searchBtn" class="btn btn-success">æœç´¢</button>
            <button id="resetBtn" class="btn btn-warning">é‡ç½®</button>
        </div>
    </div>

    <div class="card job-list">
        <table id="jobTable">
            <thead>
            <tr>
                <th>åºå·</th>
                <th>ä¼ä¸šåç§°</th>
                <th>å²—ä½åç§°</th>
                <th>è–ªèµ„èŒƒå›´</th>
                <th>å·¥ä½œåœ°ç‚¹</th>
                <th>å²—ä½ç±»å‹</th>
                <th>å‘å¸ƒæ—¶é—´</th>
                <th>æ“ä½œ</th>
            </tr>
            </thead>
            <tbody id="jobTableBody">
            <!-- å²—ä½æ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
            </tbody>
        </table>
    </div>
</div>

<!-- æ·»åŠ å²—ä½çš„æ¨¡æ€æ¡† -->
<div id="addJobModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="document.getElementById('addJobModal').classList.remove('show')">&times;</span>
        <h2>æ·»åŠ æ–°å²—ä½</h2>
        <form id="jobForm">
            <div class="form-group">
                <label for="companyName">ä¼ä¸šåç§°</label>
                <input type="text" id="companyName" required placeholder="ä¾‹å¦‚: é˜¿é‡Œå·´å·´">
            </div>

            <div class="form-group">
                <label for="jobTitle">å²—ä½åç§°</label>
                <input type="text" id="jobTitle" required placeholder="ä¾‹å¦‚: å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ">
            </div>

            <div class="form-group">
                <label for="salary">è–ªèµ„èŒƒå›´</label>
                <input type="text" id="salary" placeholder="ä¾‹å¦‚: 10k-15k" required>
            </div>

            <div class="form-group">
                <label for="location">å·¥ä½œåœ°ç‚¹</label>
                <input type="text" id="location" required placeholder="ä¾‹å¦‚: åŒ—äº¬">
            </div>

            <div class="form-group">
                <label for="requirements">å…·ä½“è¦æ±‚</label>
                <textarea id="requirements" required placeholder="è¯·è¾“å…¥å²—ä½çš„å…·ä½“è¦æ±‚..."></textarea>
            </div>

            <div class="form-group">
                <label for="jobType">å²—ä½ç±»å‹</label>
                <select id="jobType" required>
                    <option value="">è¯·é€‰æ‹©å²—ä½ç±»å‹</option>
                    <option value="å‰ç«¯å¼€å‘">å‰ç«¯å¼€å‘</option>
                    <option value="åç«¯å¼€å‘">åç«¯å¼€å‘</option>
                    <option value="å…¨æ ˆå¼€å‘">å…¨æ ˆå¼€å‘</option>
                    <option value="æ•°æ®åˆ†æ">æ•°æ®åˆ†æ</option>
                    <option value="äººå·¥æ™ºèƒ½">äººå·¥æ™ºèƒ½</option>
                    <option value="æµ‹è¯•å·¥ç¨‹å¸ˆ">æµ‹è¯•å·¥ç¨‹å¸ˆ</option>
                    <option value="è¿ç»´å·¥ç¨‹å¸ˆ">è¿ç»´å·¥ç¨‹å¸ˆ</option>
                    <option value="äº§å“ç»ç†">äº§å“ç»ç†</option>
                    <option value="å…¶ä»–">å…¶ä»–</option>
                </select>
            </div>

            <div class="form-group">
                <label for="postTime">å‘å¸ƒæ—¶é—´</label>
                <input type="date" id="postTime" required>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">æ·»åŠ å²—ä½</button>
                <button type="button" class="btn btn-danger" onclick="document.getElementById('addJobModal').classList.remove('show')">å–æ¶ˆ</button>
            </div>
        </form>
    </div>
</div>

<!-- ç¼–è¾‘å²—ä½çš„æ¨¡æ€æ¡† -->
<div id="editModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="document.getElementById('editModal').classList.remove('show')">&times;</span>
        <h2>ç¼–è¾‘å²—ä½ä¿¡æ¯</h2>
        <form id="editForm">
            <input type="hidden" id="editId">

            <div class="form-group">
                <label for="editCompanyName">ä¼ä¸šåç§°</label>
                <input type="text" id="editCompanyName" required>
            </div>

            <div class="form-group">
                <label for="editJobTitle">å²—ä½åç§°</label>
                <input type="text" id="editJobTitle" required>
            </div>

            <div class="form-group">
                <label for="editSalary">è–ªèµ„èŒƒå›´</label>
                <input type="text" id="editSalary" required>
            </div>

            <div class="form-group">
                <label for="editLocation">å·¥ä½œåœ°ç‚¹</label>
                <input type="text" id="editLocation" required>
            </div>

            <div class="form-group">
                <label for="editRequirements">å…·ä½“è¦æ±‚</label>
                <textarea id="editRequirements" required></textarea>
            </div>

            <div class="form-group">
                <label for="editJobType">å²—ä½ç±»å‹</label>
                <select id="editJobType" required>
                    <option value="å‰ç«¯å¼€å‘">å‰ç«¯å¼€å‘</option>
                    <option value="åç«¯å¼€å‘">åç«¯å¼€å‘</option>
                    <option value="å…¨æ ˆå¼€å‘">å…¨æ ˆå¼€å‘</option>
                    <option value="æ•°æ®åˆ†æ">æ•°æ®åˆ†æ</option>
                    <option value="äººå·¥æ™ºèƒ½">äººå·¥æ™ºèƒ½</option>
                    <option value="æµ‹è¯•å·¥ç¨‹å¸ˆ">æµ‹è¯•å·¥ç¨‹å¸ˆ</option>
                    <option value="è¿ç»´å·¥ç¨‹å¸ˆ">è¿ç»´å·¥ç¨‹å¸ˆ</option>
                    <option value="äº§å“ç»ç†">äº§å“ç»ç†</option>
                    <option value="å…¶ä»–">å…¶ä»–</option>
                </select>
            </div>

            <div class="form-group">
                <label for="editPostTime">å‘å¸ƒæ—¶é—´</label>
                <input type="date" id="editPostTime" required>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">ä¿å­˜æ›´æ”¹</button>
                <button type="button" class="btn btn-danger" onclick="document.getElementById('editModal').classList.remove('show')">å–æ¶ˆ</button>
            </div>
        </form>
    </div>
</div>

<script>
    // å­˜å‚¨å²—ä½æ•°æ®çš„æ•°ç»„
    let jobs = [];

    // DOMå…ƒç´ 
    const jobForm = document.getElementById('jobForm');
    const jobTableBody = document.getElementById('jobTableBody');
    const searchBtn = document.getElementById('searchBtn');
    const resetBtn = document.getElementById('resetBtn');
    const searchKeyword = document.getElementById('searchKeyword');
    const searchType = document.getElementById('searchType');
    const searchSalary = document.getElementById('searchSalary');
    const editModal = document.getElementById('editModal');
    const editForm = document.getElementById('editForm');
    const addJobModal = document.getElementById('addJobModal');

    // åˆå§‹åŒ–å‡½æ•°
    function init() {
        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®
        loadJobsFromLocalStorage();

        // æ¸²æŸ“è¡¨æ ¼
        renderJobTable();

        // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
        jobForm.addEventListener('submit', handleAddJob);
        searchBtn.addEventListener('click', handleSearch);
        resetBtn.addEventListener('click', handleReset);

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­æ¨¡æ€æ¡†
        window.addEventListener('click', (event) => {
            if (event.target === editModal) {
                editModal.classList.remove('show');
            }
            if (event.target === addJobModal) {
                addJobModal.classList.remove('show');
            }
        });
    }

    // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®
    function loadJobsFromLocalStorage() {
        const savedJobs = localStorage.getItem('itJobs');
        if (savedJobs) {
            jobs = JSON.parse(savedJobs);
        }
    }

    // ä¿å­˜æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨
    function saveJobsToLocalStorage() {
        localStorage.setItem('itJobs', JSON.stringify(jobs));
    }

    // æ·»åŠ æ–°å²—ä½
    function handleAddJob(e) {
        e.preventDefault();

        const newJob = {
            id: Date.now(), // ä½¿ç”¨æ—¶é—´æˆ³ä½œä¸ºå”¯ä¸€ID
            companyName: document.getElementById('companyName').value,
            jobTitle: document.getElementById('jobTitle').value,
            salary: document.getElementById('salary').value,
            location: document.getElementById('location').value,
            requirements: document.getElementById('requirements').value,
            jobType: document.getElementById('jobType').value,
            postTime: document.getElementById('postTime').value
        };

        jobs.push(newJob);
        saveJobsToLocalStorage();
        renderJobTable();

        // é‡ç½®è¡¨å•å¹¶å…³é—­æ¨¡æ€æ¡†
        jobForm.reset();
        addJobModal.classList.remove('show');

        showAlert('å²—ä½æ·»åŠ æˆåŠŸï¼', 'success');
    }

    // æ¸²æŸ“å²—ä½è¡¨æ ¼
    function renderJobTable(filteredJobs = null) {
        const jobsToRender = filteredJobs || jobs;

        jobTableBody.innerHTML = '';

        if (jobsToRender.length === 0) {
            const row = document.createElement('tr');
            row.innerHTML = '<td colspan="8" class="empty-state"><i>ğŸ“­</i><p>æš‚æ— å²—ä½æ•°æ®</p></td>';
            jobTableBody.appendChild(row);
            return;
        }

        jobsToRender.forEach((job, index) => {
            const row = document.createElement('tr');

            // æ ¹æ®å²—ä½ç±»å‹æ·»åŠ ä¸åŒçš„æ ·å¼
            let badgeClass = 'badge-primary';
            if (job.jobType === 'åç«¯å¼€å‘') badgeClass = 'badge-success';
            if (job.jobType === 'æ•°æ®åˆ†æ' || job.jobType === 'äººå·¥æ™ºèƒ½') badgeClass = 'badge-warning';
            if (job.jobType === 'å…¶ä»–') badgeClass = 'badge-danger';

            row.innerHTML = `
                <td>${index + 1}</td>
                <td>${job.companyName}</td>
                <td>${job.jobTitle}</td>
                <td>${job.salary}</td>
                <td>${job.location}</td>
                <td><span class="badge ${badgeClass}">${job.jobType}</span></td>
                <td>${formatDate(job.postTime)}</td>
                <td>
                    <div class="action-btns">
                        <button class="btn btn-primary btn-sm" data-id="${job.id}" onclick="handleEditJob(${job.id})">ç¼–è¾‘</button>
                        <button class="btn btn-danger btn-sm" data-id="${job.id}" onclick="handleDeleteJob(${job.id})">åˆ é™¤</button>
                        <button class="btn btn-success btn-sm" data-id="${job.id}" onclick="viewJobDetails(${job.id})">è¯¦æƒ…</button>
                    </div>
                </td>
            `;

            jobTableBody.appendChild(row);
        });
    }

    // æ ¼å¼åŒ–æ—¥æœŸ
    function formatDate(dateString) {
        if (!dateString) return '';
        const date = new Date(dateString);
        return date.toLocaleDateString('zh-CN');
    }

    // æŸ¥çœ‹å²—ä½è¯¦æƒ…
    function viewJobDetails(jobId) {
        const job = jobs.find(j => j.id == jobId);
        if (job) {
            const modalContent = `
                <div class="modal-content">
                    <span class="close" onclick="this.parentElement.parentElement.classList.remove('show')">&times;</span>
                    <h2>${job.companyName} - ${job.jobTitle}</h2>
                    <div style="margin-bottom: 20px;">
                        <p><strong>è–ªèµ„èŒƒå›´:</strong> ${job.salary}</p>
                        <p><strong>å·¥ä½œåœ°ç‚¹:</strong> ${job.location}</p>
                        <p><strong>å²—ä½ç±»å‹:</strong> <span class="badge">${job.jobType}</span></p>
                        <p><strong>å‘å¸ƒæ—¶é—´:</strong> ${formatDate(job.postTime)}</p>
                    </div>
                    <div>
                        <h3>å…·ä½“è¦æ±‚</h3>
                        <p style="white-space: pre-line;">${job.requirements}</p>
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-primary" onclick="document.getElementById('editModal').classList.remove('show')">å…³é—­</button>
                    </div>
                </div>
            `;

            const modal = document.createElement('div');
            modal.className = 'modal show';
            modal.innerHTML = modalContent;
            document.body.appendChild(modal);

            // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­æ¨¡æ€æ¡†
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.classList.remove('show');
                    setTimeout(() => modal.remove(), 300);
                }
            });
        }
    }

    // ç¼–è¾‘å²—ä½
    function handleEditJob(jobId) {
        const job = jobs.find(j => j.id == jobId);
        if (job) {
            document.getElementById('editId').value = job.id;
            document.getElementById('editCompanyName').value = job.companyName;
            document.getElementById('editJobTitle').value = job.jobTitle;
            document.getElementById('editSalary').value = job.salary;
            document.getElementById('editLocation').value = job.location;
            document.getElementById('editRequirements').value = job.requirements;
            document.getElementById('editJobType').value = job.jobType;
            document.getElementById('editPostTime').value = job.postTime;

            editModal.classList.add('show');
        }
    }

    // ä¿å­˜ç¼–è¾‘åçš„å²—ä½ä¿¡æ¯
    editForm.addEventListener('submit', function(e) {
        e.preventDefault();

        const jobId = parseInt(document.getElementById('editId').value);
        const jobIndex = jobs.findIndex(j => j.id === jobId);

        if (jobIndex !== -1) {
            jobs[jobIndex] = {
                id: jobId,
                companyName: document.getElementById('editCompanyName').value,
                jobTitle: document.getElementById('editJobTitle').value,
                salary: document.getElementById('editSalary').value,
                location: document.getElementById('editLocation').value,
                requirements: document.getElementById('editRequirements').value,
                jobType: document.getElementById('editJobType').value,
                postTime: document.getElementById('editPostTime').value
            };

            saveJobsToLocalStorage();
            renderJobTable();
            editModal.classList.remove('show');

            showAlert('å²—ä½ä¿¡æ¯æ›´æ–°æˆåŠŸï¼', 'success');
        }
    });

    // åˆ é™¤å²—ä½
    function handleDeleteJob(jobId) {
        showConfirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå²—ä½è®°å½•å—ï¼Ÿ', 'åˆ é™¤åå°†æ— æ³•æ¢å¤', 'warning', () => {
            jobs = jobs.filter(job => job.id != jobId);
            saveJobsToLocalStorage();
            renderJobTable();
            showAlert('å²—ä½åˆ é™¤æˆåŠŸï¼', 'success');
        });
    }

    // æœç´¢å²—ä½
    function handleSearch() {
        const keyword = searchKeyword.value.toLowerCase();
        const type = searchType.value;
        const salary = searchSalary.value;

        let filteredJobs = jobs;

        if (keyword) {
            filteredJobs = filteredJobs.filter(job =>
                job.companyName.toLowerCase().includes(keyword) ||
                job.jobTitle.toLowerCase().includes(keyword)
            );
        }

        if (type) {
            filteredJobs = filteredJobs.filter(job => job.jobType === type);
        }

        if (salary) {
            filteredJobs = filteredJobs.filter(job => {
                if (salary === '5kä»¥ä¸‹') return job.salary.includes('5kä»¥ä¸‹') || parseInt(job.salary) < 5000;
                if (salary === '5k-10k') return job.salary.includes('5k-10k') || (parseInt(job.salary) >= 5000 && parseInt(job.salary) < 10000);
                if (salary === '10k-15k') return job.salary.includes('10k-15k') || (parseInt(job.salary) >= 10000 && parseInt(job.salary) < 15000);
                if (salary === '15k-20k') return job.salary.includes('15k-20k') || (parseInt(job.salary) >= 15000 && parseInt(job.salary) < 20000);
                if (salary === '20kä»¥ä¸Š') return job.salary.includes('20kä»¥ä¸Š') || parseInt(job.salary) >= 20000;
                return true;
            });
        }

        renderJobTable(filteredJobs);
    }

    // é‡ç½®æœç´¢
    function handleReset() {
        searchKeyword.value = '';
        searchType.value = '';
        searchSalary.value = '';
        renderJobTable();
    }

    // æ˜¾ç¤ºæç¤ºä¿¡æ¯
    function showAlert(message, type = 'info') {
        const alert = document.createElement('div');
        alert.className = `alert alert-${type}`;
        alert.style.position = 'fixed';
        alert.style.top = '20px';
        alert.style.right = '20px';
        alert.style.padding = '15px 20px';
        alert.style.borderRadius = '4px';
        alert.style.backgroundColor = type === 'success' ? '#d4edda' : type === 'warning' ? '#fff3cd' : '#d1ecf1';
        alert.style.color = type === 'success' ? '#155724' : type === 'warning' ? '#856404' : '#0c5460';
        alert.style.border = type === 'success' ? '1px solid #c3e6cb' : type === 'warning' ? '1px solid #ffeeba' : '1px solid #bee5eb';
        alert.style.zIndex = '9999';
        alert.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
        alert.style.transition = 'all 0.3s ease';
        alert.style.transform = 'translateX(200%)';
        alert.style.opacity = '0';
        alert.textContent = message;

        document.body.appendChild(alert);

        setTimeout(() => {
            alert.style.transform = 'translateX(0)';
            alert.style.opacity = '1';
        }, 10);

        setTimeout(() => {
            alert.style.transform = 'translateX(200%)';
            alert.style.opacity = '0';
            setTimeout(() => alert.remove(), 300);
        }, 3000);
    }
    // å¯¼å…¥æµ‹è¯•æ•°æ®åŠŸèƒ½
    // å¯¼å…¥æµ‹è¯•æ•°æ®åŠŸèƒ½
    document.getElementById('importDemoData').addEventListener('click', function() {
        const demoJobs = [
            // å¤§å‚å²—ä½
            {
                id: Date.now(),
                companyName: "é˜¿é‡Œå·´å·´",
                jobTitle: "å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ",
                salary: "18k-22k",
                location: "æ­å·",
                requirements: "1. ç²¾é€šHTML/CSS/JavaScript\n2. ç†Ÿæ‚‰Vue/Reactæ¡†æ¶\n3. 3å¹´ä»¥ä¸Šç›¸å…³ç»éªŒ",
                jobType: "å‰ç«¯å¼€å‘",
                postTime: "2025-03-15"
            },
            {
                id: Date.now() + 1,
                companyName: "è…¾è®¯",
                jobTitle: "åç«¯å¼€å‘å·¥ç¨‹å¸ˆ(å®ä¹ )",
                salary: "6k-8k",
                location: "æ·±åœ³",
                requirements: "1. ç†Ÿæ‚‰Java/Python/Go\n2. äº†è§£å¾®æœåŠ¡æ¶æ„\n3. è®¡ç®—æœºç›¸å…³ä¸“ä¸šåœ¨è¯»",
                jobType: "åç«¯å¼€å‘",
                postTime: "2025-02-20"
            },

            // ä¸­å‹ä¼ä¸š
            {
                id: Date.now() + 2,
                companyName: "æ˜æºäº‘",
                jobTitle: "Javaå¼€å‘å·¥ç¨‹å¸ˆ",
                salary: "12k-16k",
                location: "æ­¦æ±‰",
                requirements: "1. ç²¾é€šJavaå¼€å‘\n2. ç†Ÿæ‚‰Springæ¡†æ¶\n3. 1å¹´ä»¥ä¸Šç»éªŒ",
                jobType: "åç«¯å¼€å‘",
                postTime: "2025-04-05"
            },
            {
                id: Date.now() + 3,
                companyName: "æœ‰èµ",
                jobTitle: "å‰ç«¯å¼€å‘(å®ä¹ )",
                salary: "4k-6k",
                location: "æ­å·",
                requirements: "1. ç†Ÿæ‚‰HTML/CSS/JSåŸºç¡€\n2. äº†è§£Vue/Reactä¼˜å…ˆ\n3. æ¯å‘¨è‡³å°‘å®ä¹ 4å¤©",
                jobType: "å‰ç«¯å¼€å‘",
                postTime: "2025-03-28"
            },

            // å°å‚/åˆ›ä¸šå…¬å¸
            {
                id: Date.now() + 4,
                companyName: "æå…‰ç§‘æŠ€(åˆåˆ›)",
                jobTitle: "å…¨æ ˆå¼€å‘å·¥ç¨‹å¸ˆ",
                salary: "8k-12k",
                location: "æˆéƒ½",
                requirements: "1. ç†Ÿæ‚‰å‰ç«¯å’Œåç«¯å¼€å‘\n2. èƒ½ç‹¬ç«‹å®Œæˆé¡¹ç›®\n3. æ¥å—åº”å±Šç”Ÿ",
                jobType: "å…¨æ ˆå¼€å‘",
                postTime: "2025-05-10"
            },
            {
                id: Date.now() + 5,
                companyName: "æ™ºäº‘ç§‘æŠ€",
                jobTitle: "Pythonæ•°æ®åˆ†æå¸ˆ",
                salary: "9k-13k",
                location: "è¥¿å®‰",
                requirements: "1. ç†Ÿæ‚‰Pythonæ•°æ®åˆ†æ\n2. äº†è§£Pandas/Numpy\n3. åº”å±Šç”Ÿå¯æŠ•",
                jobType: "æ•°æ®åˆ†æ",
                postTime: "2025-04-18"
            },

            // å®ä¹ å²—ä½
            {
                id: Date.now() + 6,
                companyName: "å°ç ç§‘æŠ€",
                jobTitle: "å‰ç«¯å¼€å‘å®ä¹ ç”Ÿ",
                salary: "3k-4k",
                location: "å—äº¬",
                requirements: "1. å¯¹å‰ç«¯å¼€å‘æœ‰å…´è¶£\n2. æ„¿æ„å­¦ä¹ æ–°æŠ€æœ¯\n3. æä¾›è½¬æ­£æœºä¼š",
                jobType: "å‰ç«¯å¼€å‘",
                postTime: "2025-05-05"
            },
            {
                id: Date.now() + 7,
                companyName: "æ•°æ®é€š",
                jobTitle: "æ•°æ®åˆ†æå®ä¹ ç”Ÿ",
                salary: "2.5k-3.5k",
                location: "é‡åº†",
                requirements: "1. ç»Ÿè®¡å­¦/è®¡ç®—æœºç›¸å…³ä¸“ä¸š\n2. åŸºç¡€SQLèƒ½åŠ›\n3. å®ä¹ æœŸ6ä¸ªæœˆ",
                jobType: "æ•°æ®åˆ†æ",
                postTime: "2025-04-22"
            },

            // å…¶ä»–å²—ä½
            {
                id: Date.now() + 8,
                companyName: "ç½‘å®‰ç§‘æŠ€",
                jobTitle: "ç½‘ç»œå®‰å…¨å·¥ç¨‹å¸ˆ",
                salary: "10k-15k",
                location: "å¹¿å·",
                requirements: "1. ç†Ÿæ‚‰ç½‘ç»œå®‰å…¨åŸç†\n2. æœ‰æ¸—é€æµ‹è¯•ç»éªŒ\n3. æ¥å—åˆçº§å·¥ç¨‹å¸ˆ",
                jobType: "è¿ç»´å·¥ç¨‹å¸ˆ",
                postTime: "2025-05-15"
            },
            {
                id: Date.now() + 9,
                companyName: "æ•™è‚²åœ¨çº¿",
                jobTitle: "äº§å“åŠ©ç†(å®ä¹ )",
                salary: "3k-4.5k",
                location: "é•¿æ²™",
                requirements: "1. å¯¹äº’è”ç½‘äº§å“æœ‰å…´è¶£\n2. è‰¯å¥½çš„æ²Ÿé€šèƒ½åŠ›\n3. æä¾›å¯¼å¸ˆæŒ‡å¯¼",
                jobType: "äº§å“ç»ç†",
                postTime: "2025-04-30"
            }
        ];

        if (confirm('ç¡®å®šè¦å¯¼å…¥æµ‹è¯•æ•°æ®å—ï¼Ÿè¿™å°†æ·»åŠ 10æ¡2025å¹´å²—ä½è®°å½•ï¼ŒåŒ…å«å¤§å‚ã€ä¸­å°ä¼ä¸šå’Œå®ä¹ å²—ä½ã€‚')) {
            jobs = [...jobs, ...demoJobs];
            saveJobsToLocalStorage();
            renderJobTable();
            showAlert('æˆåŠŸå¯¼å…¥10æ¡2025å¹´æµ‹è¯•æ•°æ®ï¼', 'success');
        }
    });

    // æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
    function showConfirm(title, text, type, callback) {
        const modal = document.createElement('div');
        modal.className = 'modal show';
        modal.innerHTML = `
            <div class="modal-content">
                <h3>${title}</h3>
                <p>${text}</p>
                <div class="form-actions">
                    <button class="btn btn-danger" id="confirmYes">ç¡®å®š</button>
                    <button class="btn btn-primary" id="confirmNo">å–æ¶ˆ</button>
                </div>
            </div>
        `;

        document.body.appendChild(modal);

        document.getElementById('confirmYes').addEventListener('click', () => {
            callback();
            modal.classList.remove('show');
            setTimeout(() => modal.remove(), 300);
        });

        document.getElementById('confirmNo').addEventListener('click', () => {
            modal.classList.remove('show');
            setTimeout(() => modal.remove(), 300);
        });

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­æ¨¡æ€æ¡†
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                modal.classList.remove('show');
                setTimeout(() => modal.remove(), 300);
            }
        });
    }

    // åˆå§‹åŒ–åº”ç”¨
    document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
